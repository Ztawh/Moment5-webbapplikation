"use strict";var coursesEl=document.getElementById("courses"),addForm=document.getElementById("add-form"),formBtn=document.getElementById("add-course"),codeInput=document.getElementById("code"),nameInput=document.getElementById("name"),progInput=document.getElementById("prog"),syllabusInput=document.getElementById("syllabus"),editForm=document.getElementById("edit-form");function getCourses(){coursesEl.innerHTML="",fetch("http://localhost:8080/webbtjanst/rest").then((function(e){return e.json()})).then((function(e){e.forEach((function(e){coursesEl.innerHTML+='<div class="course">\n                <p><b>Kurskod: </b> '.concat(e.course_id," </p>\n                <p><b>Kursnamn: </b> ").concat(e.name," </p>\n                <p><b>Progression: </b> ").concat(e.progression," </p>\n                <p><b>Kurskod: </b> ").concat(e.course_syllabus,' </p>\n                <button id="').concat(e.id,'" onClick="deleteCourse(').concat(e.id,')">Ta bort</button>\n                <button class="edit" onClick="editCourse(\'').concat(e.id,"', '").concat(e.course_id,"', '").concat(e.name,"', '").concat(e.progression,"', '").concat(e.course_syllabus,"')\">Redigera</button>\n            </div>")}))}))}function deleteCourse(e){fetch("http://localhost:8080/webbtjanst/rest?id="+e,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){getCourses()})).catch((function(e){console.log("Error: ",e)}))}function addCourse(){var e={course_id:codeInput.value,name:nameInput.value,progression:progInput.value,course_syllabus:syllabusInput.value};console.log(e),fetch("http://localhost:8080/webbtjanst/rest",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){getCourses()})).catch((function(e){console.log("Error: ",e)})),addForm.reset()}function editCourse(e,t,n,o,u){editForm.innerHTML='\n        <form>\n            <label for="code-edit">Kurskod</label>\n            <input type="text" name="code-edit" id="code-edit" value="'.concat(t,'">\n\n            <label for="name-edit">Kursnamn</label>\n            <input type="text" name="name-edit" id="name-edit" value="').concat(n,'">\n\n            <label for="prog-edit">Progression</label>\n            <input type="text" name="prog-edit" id="prog-edit" value="').concat(o,'">\n\n            <label for="syllabus-edit">Kursplan</label>\n            <input type="text" name="syllabus-edit" id="syllabus-edit" value="').concat(u,'">\n\n            \n            <button id="save">Spara</button>\n        </form>\n\n        <button onClick="abortEdit()">Avbryt</button>\n        '),document.getElementById("save").addEventListener("click",(function(t){t.preventDefault(),updateCourse(e)}))}function updateCourse(e){var t=document.getElementById("code-edit"),n=document.getElementById("name-edit"),o=document.getElementById("prog-edit"),u=document.getElementById("syllabus-edit"),r=t.value,c=n.value,s=o.value,d=u.value;r.toString(),c.toString(),s.toString(),d.toString();var a={course_id:r,name:c,progression:s,course_syllabus:d};fetch("http://localhost:8080/webbtjanst/rest?id="+e,{method:"PUT",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){getCourses()})).catch((function(e){console.log("Error: ",e)})),abortEdit()}function abortEdit(){editForm.innerHTML=""}window.addEventListener("load",getCourses),formBtn.addEventListener("click",(function(e){e.preventDefault(),addCourse()}));