"use strict";var coursesEl=document.getElementById("courses"),addForm=document.getElementById("add-form"),formBtn=document.getElementById("add-course"),codeInput=document.getElementById("code"),nameInput=document.getElementById("name"),progInput=document.getElementById("prog"),syllabusInput=document.getElementById("syllabus"),editForm=document.getElementById("edit-form");function getCourses(){coursesEl.innerHTML="",fetch("http://localhost:8080/webbtjanst/rest").then((function(e){return e.json()})).then((function(e){e.forEach((function(e){coursesEl.innerHTML+='<div class="course flex-container">\n                <div class="courseEl">'.concat(e.course_id,' </div>\n                <div class="courseEl">').concat(e.name,' </div>\n                <div class="courseEl">').concat(e.progression,' </div>\n                <div class="courseEl"><a href="').concat(e.course_syllabus,'" target="_blank">Länk</a></div>\n                <button class="delete-button" id="').concat(e.id,'" onClick="deleteCourse(').concat(e.id,')">Ta bort <i class="fas fa-trash-alt"></i></button>\n                <button class="edit-button" onClick="editCourse(\'').concat(e.id,"', '").concat(e.course_id,"', '").concat(e.name,"', '").concat(e.progression,"', '").concat(e.course_syllabus,'\')">Redigera <i class="far fa-edit"></i></button>\n            </div>')}))}))}function deleteCourse(e){fetch("http://localhost:8080/webbtjanst/rest?id="+e,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){getCourses()})).catch((function(e){console.log("Error: ",e)}))}function addCourse(){var e={course_id:codeInput.value,name:nameInput.value,progression:progInput.value,course_syllabus:syllabusInput.value};console.log(e),fetch("http://localhost:8080/webbtjanst/rest",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){getCourses()})).catch((function(e){console.log("Error: ",e)})),addForm.reset()}function editCourse(e,t,n,o,s){editForm.innerHTML='\n        <form>\n            <h3>Redigera kurs</h3>\n            <label for="code-edit">Kurskod</label>\n            <input type="text" name="code-edit" id="code-edit" value="'.concat(t,'">\n\n            <label for="name-edit">Kursnamn</label>\n            <input type="text" name="name-edit" id="name-edit" value="').concat(n,'">\n\n            <label for="prog-edit">Progression</label>\n            <input type="text" name="prog-edit" id="prog-edit" value="').concat(o,'">\n\n            <label for="syllabus-edit">Kursplan(länk)</label>\n            <input type="text" name="syllabus-edit" id="syllabus-edit" value="').concat(s,'">\n\n            <div class="flex-container">\n                <button id="abort" onClick="abortEdit()">Avbryt</button>\n                <button id="save">Spara</button>\n            </div>\n            \n        </form>\n        '),document.getElementById("save").addEventListener("click",(function(t){t.preventDefault(),updateCourse(e)}))}function updateCourse(e){var t=document.getElementById("code-edit"),n=document.getElementById("name-edit"),o=document.getElementById("prog-edit"),s=document.getElementById("syllabus-edit"),c=t.value,a=n.value,r=o.value,u=s.value;c.toString(),a.toString(),r.toString(),u.toString();var d={course_id:c,name:a,progression:r,course_syllabus:u};fetch("http://localhost:8080/webbtjanst/rest?id="+e,{method:"PUT",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){getCourses()})).catch((function(e){console.log("Error: ",e)})),abortEdit()}function abortEdit(){editForm.innerHTML=""}window.addEventListener("load",getCourses),formBtn.addEventListener("click",(function(e){e.preventDefault(),addCourse()}));